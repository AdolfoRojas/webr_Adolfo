<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pie Chart Revisited • webr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Pie Chart Revisited">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">webr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/PieDonut.html">Pie Chart Revisited</a>
    </li>
    <li>
      <a href="../articles/plot-htest.html">Plot for distribution of common statistics and p-value</a>
    </li>
    <li>
      <a href="../articles/rsconnect/documents/PieDonut.html">UNKNOWN TITLE</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cardiomoon/webr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Pie Chart Revisited</h1>
                        <h4 class="author">Keon-Woong Moon</h4>
            
            <h4 class="date">2018-06-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cardiomoon/webr/blob/master/vignettes/PieDonut.Rmd"><code>vignettes/PieDonut.Rmd</code></a></small>
      <div class="hidden name"><code>PieDonut.Rmd</code></div>

    </div>

    
    
<p>A pie chart (or a circle chart) is a circular statistical graphic which is divided into slices to illustrate numerical proportion. In a pie chart, the arc length of each slice (and consequently its central angle and area), is proportional to the quantity it represents. While it is named for its resemblance to a pie which has been sliced, there are variations on the way it can be presented. A doughnut chart (also spelled donut) is a variant of the pie chart, with a blank center allowing for additional information about the data as a whole to be included. I recently developed a function named “PieDonut” to combine pie and donut chart.</p>
<div id="installation-of-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#installation-of-packages" class="anchor"></a>Installation of packages</h2>
<p>You have to install the latest versions of “webr” and “moonBook” packages from github. The CRAN version does not have PieDonut() function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(devtools)) <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"cardiomoon/moonBook"</span>)
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"cardiomoon/webr"</span>)</code></pre></div>
</div>
<div id="load-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#load-packages" class="anchor"></a>Load packages</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(ggplot2)
<span class="kw">require</span>(moonBook)
<span class="kw">require</span>(webr)</code></pre></div>
</div>
<div id="basic-use" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-use" class="anchor"></a>Basic Use</h2>
<p>The acs data included in package moonBook is demographic and laboratory data of 857 patients with acute coronary syndrome(ACS). If you want to show the distribution of smoking status according to diagnosis, make the PieDonut Plot with the following code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">pies=</span>Dx,<span class="dt">donuts=</span>smoking))</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-3-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="label-position" class="section level2">
<h2 class="hasAnchor">
<a href="#label-position" class="anchor"></a>Label position</h2>
<p>By default, the labelposition argument is 2 - labels for doughnuts are located outside if the percentage of total is less than 10 % (labelpositionThreshold=0.1 by default).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">ratioByGroup=</span><span class="ot">FALSE</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-4-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>If you want to place the labels for donuts inside, set the labelposition argument 0. To place all labels outside, set the labelposition argument 1.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">selected=</span><span class="dv">1</span>,<span class="dt">labelposition=</span><span class="dv">0</span>,<span class="dt">title=</span><span class="st">"labelposition=0"</span>)
<span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">selected=</span><span class="dv">1</span>,<span class="dt">labelposition=</span><span class="dv">1</span>,<span class="dt">title=</span><span class="st">"labelposition=1"</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-5-1.png" width="45%"><img src="PieDonut_files/figure-html/unnamed-chunk-5-2.png" width="45%"></p>
</div>
<div id="explode-pie" class="section level2">
<h2 class="hasAnchor">
<a href="#explode-pie" class="anchor"></a>Explode Pie</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">explode=</span><span class="dv">1</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-6-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="explode-pie-and-donuts" class="section level2">
<h2 class="hasAnchor">
<a href="#explode-pie-and-donuts" class="anchor"></a>Explode Pie and Donuts</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">explode=</span><span class="dv">1</span>,<span class="dt">explodeDonut=</span><span class="ot">TRUE</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-7-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="explode-pie-and-donuts-independently" class="section level2">
<h2 class="hasAnchor">
<a href="#explode-pie-and-donuts-independently" class="anchor"></a>Explode Pie and Donuts independently</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">explode=</span><span class="dv">1</span>,<span class="dt">selected=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>),<span class="dt">explodeDonut=</span><span class="ot">TRUE</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-8-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="customize-start-angle" class="section level2">
<h2 class="hasAnchor">
<a href="#customize-start-angle" class="anchor"></a>Customize start angle</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">start=</span><span class="dv">3</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">2</span>,<span class="dt">explode=</span><span class="dv">1</span>,<span class="dt">selected=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>),<span class="dt">explodeDonut=</span><span class="ot">TRUE</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-9-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="add-title" class="section level2">
<h2 class="hasAnchor">
<a href="#add-title" class="anchor"></a>Add title</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">start=</span><span class="dv">3</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">2</span>,<span class="dt">explode=</span><span class="dv">1</span>,<span class="dt">selected=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>),<span class="dt">explodeDonut=</span><span class="ot">TRUE</span>,<span class="dt">title=</span><span class="st">"Distribution of Smoking Status by Diagnosis"</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-10-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="adjust-the-radius" class="section level2">
<h2 class="hasAnchor">
<a href="#adjust-the-radius" class="anchor"></a>Adjust the radius</h2>
<p>You can adjust the radius of pie and donut plot with r0, r1 and r2 arguments. If you want to show exact pie(withoue a center hole), set the r0 argument ‘0’ and showPieName FALSE.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">r0=</span><span class="dv">0</span>,<span class="dt">showPieName=</span><span class="ot">FALSE</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-11-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>You can adjust the radius of pie(r1, default value 1) and radius doughnut(r2, default value 1.2). You can make smaller pies and larger doughnuts with the following codes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">r0=</span><span class="fl">0.2</span>,<span class="dt">r1=</span><span class="fl">0.8</span>,<span class="dt">r2=</span><span class="fl">1.4</span>,<span class="dt">explode=</span><span class="dv">1</span>,<span class="dt">start=</span>pi<span class="op">/</span><span class="dv">2</span>,<span class="dt">explodeDonut=</span><span class="ot">TRUE</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-12-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="show-ratio-by-group" class="section level2">
<h2 class="hasAnchor">
<a href="#show-ratio-by-group" class="anchor"></a>Show Ratio by group</h2>
<p>By Default, the ratio of donuts are percentage by group. If you want to show percentage of total, set the ratioByGroup argument FALSE.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(acs,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Dx,smoking),<span class="dt">ratioByGroup=</span><span class="ot">FALSE</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-13-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="doughnut-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#doughnut-plot" class="anchor"></a>Doughnut plot</h2>
<p>If you want to show donut plot(without pie), please use the followng code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">browser=<span class="kw">c</span>(<span class="st">"MSIE"</span>,<span class="st">"Firefox"</span>,<span class="st">"Chrome"</span>,<span class="st">"Safari"</span>,<span class="st">"Opera"</span>)
share=<span class="kw">c</span>(<span class="dv">50</span>,<span class="fl">21.9</span>,<span class="fl">10.8</span>,<span class="fl">6.5</span>,<span class="fl">1.8</span>)
df=<span class="kw">data.frame</span>(browser,share)
<span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(df,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(browser,<span class="dt">count=</span>share),<span class="dt">r0=</span><span class="fl">0.7</span>,<span class="dt">start=</span><span class="dv">3</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">2</span>,<span class="dt">labelpositionThreshold=</span><span class="fl">0.1</span>)
<span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(df,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(browser,<span class="dt">count=</span>share),<span class="dt">r0=</span><span class="fl">0.7</span>,<span class="dt">explode=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>),<span class="dt">start=</span><span class="dv">3</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">2</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-14-1.png" width="45%"><img src="PieDonut_files/figure-html/unnamed-chunk-14-2.png" width="45%"></p>
</div>
<div id="summarized-data" class="section level2">
<h2 class="hasAnchor">
<a href="#summarized-data" class="anchor"></a>Summarized Data</h2>
<p>If you have summarized data, please map the count variable to count.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(dplyr)
df=mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(gear,carb) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="dt">n=</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n.html">n</a></span>())
df</code></pre></div>
<pre><code># A tibble: 11 x 3
# Groups:   gear [?]
    gear  carb     n
   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
 1     3     1     3
 2     3     2     4
 3     3     3     3
 4     3     4     5
 5     4     1     4
 6     4     2     4
 7     4     4     4
 8     5     2     2
 9     5     4     1
10     5     6     1
11     5     8     1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(df,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(gear,carb,<span class="dt">count=</span>n),<span class="dt">explode=</span><span class="dv">3</span>,<span class="dt">r1=</span><span class="fl">0.9</span>,<span class="dt">explodeDonut=</span><span class="ot">TRUE</span>,<span class="dt">title=</span><span class="st">"Distribution of carburetors by gears"</span>,<span class="dt">star=</span><span class="dv">3</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">2</span>,<span class="dt">labelposition=</span><span class="dv">0</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-16-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>This plot is identical with the following plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/PieDonut.html">PieDonut</a></span>(mtcars,<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(gear,carb),<span class="dt">explode=</span><span class="dv">3</span>,<span class="dt">r1=</span><span class="fl">0.9</span>,<span class="dt">explodeDonut=</span><span class="ot">TRUE</span>,<span class="dt">title=</span><span class="st">"Distribution of carburetors by gears"</span>,<span class="dt">star=</span><span class="dv">3</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">2</span>,<span class="dt">labelposition=</span><span class="dv">0</span>)</code></pre></div>
<p><img src="PieDonut_files/figure-html/unnamed-chunk-17-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#installation-of-packages">Installation of packages</a></li>
      <li><a href="#load-packages">Load packages</a></li>
      <li><a href="#basic-use">Basic Use</a></li>
      <li><a href="#label-position">Label position</a></li>
      <li><a href="#explode-pie">Explode Pie</a></li>
      <li><a href="#explode-pie-and-donuts">Explode Pie and Donuts</a></li>
      <li><a href="#explode-pie-and-donuts-independently">Explode Pie and Donuts independently</a></li>
      <li><a href="#customize-start-angle">Customize start angle</a></li>
      <li><a href="#add-title">Add title</a></li>
      <li><a href="#adjust-the-radius">Adjust the radius</a></li>
      <li><a href="#show-ratio-by-group">Show Ratio by group</a></li>
      <li><a href="#doughnut-plot">Doughnut plot</a></li>
      <li><a href="#summarized-data">Summarized Data</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Keon-Woong Moon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
